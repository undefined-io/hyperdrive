#!/var/hyperdrive/scripts/overseer
# vim: set ft=sh :

# TODO: this should probably be a function, not a script
# SCRIPT_NAME always being hdgit would be hard to debug
PRIVATE_KEY="${1}"
shift
if [[ -z "${1}" ]]; then
  fatal "missing git command"
fi
ssh-agent bash -c "ssh-add /var/hyperdrive/private_keys/${PRIVATE_KEY} && git $* 2>&1 | timestamped '${SCRIPT_NAME}' 30"
