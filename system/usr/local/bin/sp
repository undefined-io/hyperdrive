#!/usr/bin/env bash

# NOTE: These are just the beginnings of experimenting with a central "router"
# TODO: Need to make this source the main files, maybe this file should be generated on install?

COMMAND="${1}"
shift
source "/etc/starphleet/main.conf" || exit 0
SCRIPT_DIR="${STARPHLEET_ROOT}/scripts"
case "${COMMAND}" in
  pilot)
    [[ -n "${1}" ]] && lxc-attach --name="${1}"
    ;;
  decommission)
    [[ -n "${1}" ]] && lxc-destroy -f --name="${1}"
    ;;
  engage)
    [[ -n "${1}" ]] && "${SCRIPT_DIR}/ship-engage" "${1}"
    ;;
  launch)
    [[ -n "${1}" ]] && "${SCRIPT_DIR}/ship-launch" "${1}"
    ;;
  assemble)
    [[ -n "${1}" ]] && "${SCRIPT_DIR}/ship-build" name "${1}" --running
    ;;
  status)
    "${SCRIPT_DIR}/status"
    ;;
  *)
    echo "sp: ERROR" || false
    ;;
esac

#"${SCRIPT_DIR}/${SCRIPT_NAME}" $@
