#!/usr/bin/env bash

# NOTE: These are just the beginnings of experimenting with a central "router"
# TODO: Need to make this source the main files, maybe this file should be generated on install?

SCRIPT="${1}"
shift
COMMAND="${1}"
shift
source "/etc/starphleet/main.conf" || exit 0
SCRIPT_DIR="${STARPHLEET_ROOT}/scripts"
case "${SCRIPT}" in
  workstation)
    case "${COMMAND}" in
      use)
        [[ -n "${1}" ]] && lxc-attach --name="${1}"
        ;;
      breakdown)
        [[ -n "${1}" ]] && lxc-destroy -f --name="${1}"
        ;;
      assemble)
        [[ -n "${1}" ]] && "${SCRIPT_DIR}/ship-build" service "${1}" --running
        ;;
    esac
    ;;

esac
#"${SCRIPT_DIR}/${SCRIPT_NAME}" $@
