<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Requirements / OS Support</title>
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
		<link rel="stylesheet" href="css/bootstrap.css">
		<link rel="stylesheet" href="css/tomorrow-night.css">
		<link rel="stylesheet" href="css/marked-docs.css">
	</head>
	<body>
		
<div class="jumbotron">
	<div class="container-fluid">
		<h1>Hyperdrive</h1>
		<p>Containers + Buildpacks + Repositories = Autodeploy Services</p>
	</div>
</div>

<div class="container-fluid">
	<div class="row">
		
		<div class="col-md-3">
			<div class="toc">
					
					<h1><a href="#toc-0">Requirements / OS Support</a></h1>
					
					<h1><a href="#toc-1">Overview</a></h1>
					
					<h2><a href="#toc-2">Installation</a></h2>
					
					<h3><a href="#toc-3">Saucy</a></h3>
					
					<h3><a href="#toc-4">Vagrant</a></h3>
					
					<h1><a href="#toc-5">Terminology</a></h1>
					
					<h1><a href="#toc-6">Getting Started</a></h1>
					
					<h2><a href="#toc-7">Setup Headquarters Repo</a></h2>
					
					<h3><a href="#toc-8">Example</a></h3>
					
					<h2><a href="#toc-9">Assign Squadron to HQ</a></h2>
					
					<h1><a href="#toc-10">Where Hyperdrive Lives</a></h1>
					
					<h2><a href="#toc-11">/data/hyperdrive</a></h2>
					
					<h2><a href="#toc-12">/var/hyperdrive</a></h2>
					
					<h2><a href="#toc-13">/etc/hyperdrive</a></h2>
					
					<h1><a href="#toc-14">Orders</a></h1>
					
					<h1><a href="#toc-15">Developer Notes</a></h1>
					
					<h2><a href="#toc-16">Step By Step (Just Notes)</a></h2>
					
					<h3><a href="#toc-17">Bootstrap</a></h3>
					
					<h3><a href="#toc-18">Running everything</a></h3>
					
					<h2><a href="#toc-19">Hacking on Hyperdrive with Vagrant</a></h2>
					
					<h3><a href="#toc-20">Symlink Approach</a></h3>
					
					<h3><a href="#toc-21">Github Approach</a></h3>
					
			</div>
		</div>
		<div class="col-md-9">
		
			<p>Hyperdrive is a toolkit for turning a virtual or physical machine infrastructure into a continuous deployment stack.</p>
<p>This is a fork of wballard/hyperdrive, and uses many of the original ideas, but a different approach to the implementation.</p>
<h1 class="anchor" id="toc-0">Requirements / OS Support</h1>
<p>Currently Hyperdrive is only supported on Ubuntu 14.04.</p>
<h1 class="anchor" id="toc-1">Overview</h1>
<p>This version of hyperdrive is still under heavy development, and many critical pieces are missing. It is not meant for a production install anywhere.</p>
<p>Installation is really only recommended to see the limited working features in action.</p>
<h2 class="anchor" id="toc-2">Installation</h2>
<h3 class="anchor" id="toc-3">Saucy</h3>
<pre><code class="hljs lang-bash"><span class="hljs-comment"># On most systems, the following will suffice to install Hyperdrive</span>
bash &lt;(curl https://raw.githubusercontent.com/undefined-io/hyperdrive/reset/bootstrap)
</code></pre>
<h3 class="anchor" id="toc-4">Vagrant</h3>
<p>The Vagrantfile that comes with the current version or hyperdrive should allow installation on parallels, vmware and virtualbox.</p>
<p><strong>NOTE OSX/MAC USERS:</strong> <em>If you have just installed Vagrant, and still have the &quot;Vagrant&quot; pkg mounted, your install of Hyperdrive will fail. You&#39;ll have to unmount the pkg first before you try to start up the image</em></p>
<pre><code class="hljs lang-bash"><span class="hljs-comment"># Run the following export(s), then choose the file that fit your vm software</span>
<span class="hljs-keyword">export</span> HYPERDRIVE_VAGRANT_MEMSIZE=<span class="hljs-number">4096</span>

<span class="hljs-comment"># Parallels</span>
./parallels

<span class="hljs-comment"># VMware</span>
./vmware

<span class="hljs-comment"># Virtualbox</span>
./virtualbox
</code></pre>
<h1 class="anchor" id="toc-5">Terminology</h1>
<p>Hyperdrive uses a spaceship theme to describe the working environments. Here is a list of the different terms.</p>
<ul>
<li><strong>Fleet</strong> - A collection of squadarons</li>
<li><strong>Squadron</strong> - A collection of ships. (<em>VM, Server, etc...</em>)</li>
<li><strong>Headquarters</strong> - A place for squadrons to obtain orders</li>
<li><strong>Ship</strong> - Ships are responsible for completing assignments. (<em>LXC</em>)</li>
<li><strong>Assignment</strong> - Task assigned to a ship based on orders from the HQ. (<em>Application, Service, etc...</em>)</li>
<li><strong>Orders</strong> - Contain all the information for a ship to complete an assignment.</li>
<li><strong>Admiral</strong> - In charge of the fleet, and has full access to every squadron</li>
<li><strong>Hull</strong> - Framework for a ship</li>
</ul>
<h1 class="anchor" id="toc-6">Getting Started</h1>
<h2 class="anchor" id="toc-7">Setup Headquarters Repo</h2>
<p>Headquarters are just GIT repositories that contain a hyperdrive specific directory structure and tell each Captain in the fleet what to do.</p>
<h3 class="anchor" id="toc-8">Example</h3>
<pre><code class="hljs">|<span class="hljs-comment">-- authorized_keys</span>
|   `<span class="hljs-comment">-- john.doe@hyperdrive.com.pub</span>
|<span class="hljs-comment">-- nodejs-ship</span>
|   `<span class="hljs-comment">-- orders</span>
`<span class="hljs-comment">-- python-ship</span>
    `<span class="hljs-comment">-- orders</span>
</code></pre><ul>
<li><strong>/authorized_keys</strong> - contains public keys for admiral access</li>
<li><strong>/nodejs-ship/orders</strong> - orders with an assignment called &#39;nodejs-ship&#39;</li>
<li><strong>/python-ship/orders</strong> - orders with an assignment called &#39;python-ship&#39;</li>
</ul>
<h2 class="anchor" id="toc-9">Assign Squadron to HQ</h2>
<pre><code class="hljs lang-bash"><span class="hljs-comment"># This will setup a clone of the HQ in "/data/hyperdrive/headquarters" (default path)</span>
hyperdrive-headquarters &lt;REPO_URL&gt; --sync
</code></pre>
<p>If you want the Captain to obtain new orders from the HQ automatically, you can do that by:</p>
<pre><code class="hljs lang-bash">start hyperdrive-captain-obtain-orders
</code></pre>
<p>This will make the captain check with the configured HQ every minute, to see if any updates or new orders are available.</p>
<h1 class="anchor" id="toc-10">Where Hyperdrive Lives</h1>
<p>These are the default locations. <strong>NOTE</strong> Many of these locations are still changing during the refactor.</p>
<h2 class="anchor" id="toc-11">/data/hyperdrive</h2>
<p>The Hyperdrive data directory. The GIT repo lives here, and other files related to keeping track of Hyperdrive related stuff.</p>
<pre><code class="hljs">|<span class="hljs-comment">-- git</span>
|<span class="hljs-comment">-- includes</span>
|<span class="hljs-comment">-- bootstrap.log</span>
|<span class="hljs-comment">-- lxc</span>
`<span class="hljs-comment">-- records</span>
    `<span class="hljs-comment">-- system.files</span>
</code></pre><ul>
<li><strong>/git/</strong> - The Hyperdrive GIT repo</li>
<li><strong>/includes/</strong> - Environment files that will be used as hyperdrive runs (after install, this is empty)</li>
<li><strong>/bootstrap.log</strong> - Inital setup log from when the system was bootstrapped</li>
<li><strong>/lxc/</strong> - The root of the container file system</li>
<li><strong>/records/system.files</strong> - A list of files that were installed in system folders (/etc/ /usr/bin/ ...)</li>
</ul>
<h2 class="anchor" id="toc-12">/var/hyperdrive</h2>
<pre><code class="hljs">|<span class="hljs-comment">-- containers</span>
|<span class="hljs-comment">-- nginx</span>
|   |<span class="hljs-comment">-- direct</span>
|   |<span class="hljs-comment">-- mount</span>
|   `<span class="hljs-comment">-- upstream</span>
|<span class="hljs-comment">-- private_keys</span>
|<span class="hljs-comment">-- public_keys</span>
`<span class="hljs-comment">-- scripts</span>
    `<span class="hljs-comment">-- lib</span>
</code></pre><ul>
<li><strong>/containers/</strong> - The actual images of the running LXC are stored here</li>
<li><strong>/nginx/direct/</strong> - Configs to access ship on individual port</li>
<li><strong>/nginx/mount/</strong> - Configs to access ship under hyperdrive root</li>
<li><strong>/nginx/upstream/</strong> - Loadmaster config to have one access point for all workstations</li>
<li><strong>/private_keys/</strong> - Private keys used to access remote GIT repos</li>
<li><strong>/public_keys/</strong> - Public keys for admiral access</li>
<li><strong>/scripts/</strong> - The main hyperdrive scripts</li>
<li><strong>/scripts/lib/</strong> - Support files for the main hyperdrive scripts</li>
</ul>
<h2 class="anchor" id="toc-13">/etc/hyperdrive</h2>
<pre><code class="hljs">`<span class="hljs-comment">-- main.conf</span>
</code></pre><ul>
<li><strong>/main.conf</strong> - Master settings for Hyperdrive intall</li>
</ul>
<h1 class="anchor" id="toc-14">Orders</h1>
<p>The <code>orders</code> file is used to configure environment variables specific to the app and Hyperdrive.</p>
<h1 class="anchor" id="toc-15">Developer Notes</h1>
<p>If you are using the provided <code>Vagrantfile</code>, your box will have the working copy of hyperdrive located at <code>/vagrant</code> on your VM. This comes in handy, for testing changes prior to them being installed.</p>
<h2 class="anchor" id="toc-16">Step By Step (Just Notes)</h2>
<p>Much of this will be improved during the dev cycle, but trying to allow devs to understand what I&#39;m doing atm while developing.</p>
<h3 class="anchor" id="toc-17">Bootstrap</h3>
<pre><code class="hljs lang-bash"><span class="hljs-comment"># This sets up the basics</span>
/vagrant/bootstrap <span class="hljs-string">""</span> <span class="hljs-string">""</span> <span class="hljs-string">"file:///vagrant"</span> <span class="hljs-string">""</span>
</code></pre>
<h3 class="anchor" id="toc-18">Running everything</h3>
<pre><code class="hljs lang-bash"><span class="hljs-comment"># Setup HQ, monitor for auto deploy</span>
<span class="hljs-built_in">cd</span> /var/hyperdrive/scripts/
./hyperdrive-headquarters https://github.com/datfinesoul/hyperdrive-hq<span class="hljs-comment">#master</span>
start hyperdrive-captain-obtain-orders

<span class="hljs-comment"># To see logs</span>
<span class="hljs-built_in">tail</span> -F /var/log/upstart/hyperdrive*
</code></pre>
<h2 class="anchor" id="toc-19">Hacking on Hyperdrive with Vagrant</h2>
<h3 class="anchor" id="toc-20">Symlink Approach</h3>
<p>The easiest way to hack on Hyperdrive is usually to use Vagrant and then symlink the folders of files you are working on.</p>
<pre><code class="hljs lang-bash">vagrant ssh
<span class="hljs-built_in">sudo</span> su -
<span class="hljs-built_in">cd</span> /var/hyperdrive
<span class="hljs-built_in">mv</span> scripts scripts.bak
<span class="hljs-built_in">ln</span> <span class="hljs-operator">-s</span> /vagrant/app/scripts/
</code></pre>
<p>Then just work on the scripts in your local directories using your favorite editors, and test out the results immediately.</p>
<p><strong>NOTE:</strong> Running <code>install</code> will wipe out all the symlinks.</p>
<h3 class="anchor" id="toc-21">Github Approach</h3>
<p>If you prefer to check in all changes, use the push/install approach.</p>
<pre><code class="hljs lang-bash"><span class="hljs-comment"># On the Hyperdrive system or VM:</span>
<span class="hljs-built_in">cd</span> /var/hyperdrive/scripts
./install
</code></pre>
<p>This pulls the latest changes and upgrades hyperdrive. The repo that you pull from will come from the <code>/etc/hyperdrive/main.conf</code> file (HYPERDRIVE_REMOTE)</p>

		</div>
	</div>
</div>

	</body>
</html>
